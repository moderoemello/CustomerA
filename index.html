<!DOCTYPE html>
<html>
<head>
  <title>Customer Loyalty Number</title>
  <style>
    .keypad {
      display: inline-block;
    }
    .keypad button {
      width: 50px;
      height: 50px;
      margin: 5px;
    }
  </style>
</head>
<body>
  <h1>Enter Customer Phone Number</h1>
  <form id="loyaltyForm">
    <label for="phoneNumber">Phone Number:</label>
    <input type="text" id="phoneNumber" name="phoneNumber" required>
    <br>
    <label for="loyaltyCardNumber">Loyalty Card Number:</label>
    <input type="text" id="loyaltyCardNumber" name="loyaltyCardNumber">
    <br>
    <div class="keypad">
      <button onclick="addToPhoneNumber(1)">1</button>
      <button onclick="addToPhoneNumber(2)">2</button>
      <button onclick="addToPhoneNumber(3)">3</button>
      <br>
      <button onclick="addToPhoneNumber(4)">4</button>
      <button onclick="addToPhoneNumber(5)">5</button>
      <button onclick="addToPhoneNumber(6)">6</button>
      <br>
      <button onclick="addToPhoneNumber(7)">7</button>
      <button onclick="addToPhoneNumber(8)">8</button>
      <button onclick="addToPhoneNumber(9)">9</button>
      <br>
      <button onclick="addToPhoneNumber(0)">0</button>
      <button onclick="clearPhoneNumber()">Clear</button>
    </div>
    <br>
    <button type="submit">Submit</button>
  </form>

  <script>
    var phoneNumberInput = document.getElementById("phoneNumber");
    var loyaltyCardNumberInput = document.getElementById("loyaltyCardNumber");

    function addToPhoneNumber(digit) {
      phoneNumberInput.value += digit;
    }

    function clearPhoneNumber() {
      phoneNumberInput.value = "";
    }

    document.getElementById("loyaltyForm").addEventListener("submit", function(event) {
      event.preventDefault();
      var phoneNumber = phoneNumberInput.value;
      var loyaltyCardNumber = loyaltyCardNumberInput.value;
      addLoyaltyNumberToReceipt(phoneNumber, loyaltyCardNumber);
    });

    function addLoyaltyNumberToReceipt(phoneNumber, loyaltyCardNumber) {
      // Create the loyalty number action using korona_plugin_api
      var loyaltyNumberAction = korona_plugin_api.setReceiptInfotexts({
        infoTexts: ["Loyalty Number: " + phoneNumber],
        loyaltyCardNumber: loyaltyCardNumber
      });

      // Add the action to the response
      korona_plugin_api.response.startActions().addSale(loyaltyNumberAction);

      // Print a success message or perform any other necessary actions
      console.log("Loyalty number added to receipt: " + phoneNumber);
      console.log("Loyalty card number: " + loyaltyCardNumber);
    }
  </script>
  <script src="/korona-plugin-api.js"></script>
</body>
</html>
